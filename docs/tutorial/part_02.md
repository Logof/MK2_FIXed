# Глава 2 - Tileset


## Шрифты
Файл со шрифтом должен называться font.png и находиться в каталоге gfx. 
Если вы не хотите редактировать build.sh, то файл со шрифтом должен содержать 64 тайла, которые представляют изображения символы с 32 по 95 кодировки ASCII и хранится в виде изображения 256x16, подобного следующему:
https://raw.githubusercontent.com/mojontwins/MK1/master/docs/wiki-img/02_base_font.png

Самый простой способ - переименовать файл base_source.png, включенный в пакет, в качестве шаблона и рисовать на нем или адаптировать существующий шрифт.

## Конвертация и импорт
Утилита ts2bin, включенная в /utils, берет файл со шрифтом и набор тайлов и генерирует двоичный файл со всеми шаблонами в формате, ожидаемом MTE MK2.
Вызов конвертера включен в make.sh.

ts2bin предназначен для вызова из командной строки (или из файла сценария, такого как make.sh). 
Если вы запустите его без параметров из командной строки, ts2bin сообщит вам, какие параметры он ожидает:

```
$ src/utils/ts2bin
ts2bin v0.4 20200119 ~ Usage:

    $ ts2bin font.png/nofont work.png ts.bin [forcezero]

    where:
       * font.png is a 256x16 file with 64 chars ascii 32-95
         (use 'nofont' if you don't want to include a font & gen. 192 tiles)
       * work.png is a 256x48 file with your 16x16 tiles
         (use 'notiles' if you don't want to include a tileset & gen. 64 tiles)
         (use 'blank' if you want to generate a 100% blank placeholder tileset)
       * ts.bin is the output, 2304 bytes bin file.
       * forcezero: adds 0 as 2nd colour when there's only one per 8x8 cell
```
Первый параметр - это имя файла со шрифом или nofont, если вы хотите только преобразовать набор тайлов.

Второй параметр - это имя файла с набором тайлов или notiles, если вы хотите преобразовать только шрифт.

Третий параметр - это имя файла, в который получится на выходе.

Четвертый параметр является необязательным и используется для указания цвета чернил 0-7, который вы хотите использовать, если будет обнаружен какой-либо «узор», представляющий собой сплошной квадрат в качестве второго цвета. Если вы знаете о Спектруме, вы поймете это.

Если открыть make.sh, можно увидеть, что параметры, используемые в вызове для получения шаблонов, соответствуют указанным выше (шрифт называется font.png, а файл с tileset - work.png, и они находятся в gfx). Выходной файл - tileset.bin, а 7 используется как цвет по умолчанию:
```
../utils/ts2bin ../gfx/font.png ../gfx/work.png ../bin/ts.bin forcezero
```
//TODO Вынести в параметры
* Если в игре используются цветные спрайты на полностью черном фоне, то придется указать в этой строке нужный цвет. * 
 
